<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.8.11">
  <compounddef id="rosbridge__client_8py" kind="file" language="Python">
    <compoundname>rosbridge_client.py</compoundname>
    <innerclass refid="classrosbridge__client_1_1ROSBridgeClient" prot="public">rosbridge_client::ROSBridgeClient</innerclass>
    <innerclass refid="classrosbridge__client_1_1__Publisher" prot="public">rosbridge_client::_Publisher</innerclass>
    <innerclass refid="classrosbridge__client_1_1__Subscriber" prot="public">rosbridge_client::_Subscriber</innerclass>
    <innerclass refid="classrosbridge__client_1_1__Service" prot="public">rosbridge_client::_Service</innerclass>
    <innerclass refid="classrosbridge__client_1_1__ActionClient" prot="public">rosbridge_client::_ActionClient</innerclass>
    <innerclass refid="classrosbridge__client_1_1__Goal" prot="public">rosbridge_client::_Goal</innerclass>
    <innernamespace refid="namespacerosbridge__client">rosbridge_client</innernamespace>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
    </detaileddescription>
    <programlisting>
<codeline lineno="1"><highlight class="stringliteral">&quot;&quot;&quot;This<sp/>module<sp/>provides<sp/>a<sp/>python<sp/>client<sp/>for<sp/>rosbridge<sp/>to<sp/>publish,<sp/>subscribe<sp/>topics,</highlight></codeline>
<codeline lineno="2"><highlight class="stringliteral">call<sp/>services<sp/>and<sp/>use<sp/>action<sp/>client.</highlight></codeline>
<codeline lineno="3"><highlight class="stringliteral">&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4"><highlight class="normal"></highlight></codeline>
<codeline lineno="5"><highlight class="normal"></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>threading</highlight></codeline>
<codeline lineno="6"><highlight class="normal"></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>time</highlight></codeline>
<codeline lineno="7"><highlight class="normal"></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>json</highlight></codeline>
<codeline lineno="8"><highlight class="normal"></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>uuid</highlight></codeline>
<codeline lineno="9"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/>ws4py.client.threadedclient<sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>WebSocketClient</highlight></codeline>
<codeline lineno="10"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/>pydispatch<sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>dispatcher</highlight></codeline>
<codeline lineno="11"><highlight class="normal"></highlight></codeline>
<codeline lineno="12"><highlight class="normal"></highlight></codeline>
<codeline lineno="13"><highlight class="normal"></highlight><highlight class="keyword">class<sp/></highlight><highlight class="normal">ROSBridgeClient(WebSocketClient):</highlight></codeline>
<codeline lineno="14"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;ROSBridgeClient<sp/>extends<sp/>WebSocketClient<sp/>and<sp/>manages<sp/>connection<sp/>to<sp/>the<sp/>server<sp/>and<sp/>all<sp/>interactions<sp/>with<sp/>ROS.</highlight></codeline>
<codeline lineno="15"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="16"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>It<sp/>keeps<sp/>a<sp/>record<sp/>of<sp/>all<sp/>publishers,<sp/>subscriber,<sp/>service<sp/>request<sp/>callbacks<sp/>and<sp/>action<sp/>clients.</highlight></codeline>
<codeline lineno="17" refid="classrosbridge__client_1_1ROSBridgeClient" refkind="compound"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="18"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classrosbridge__client_1_1ROSBridgeClient_1a4d4bd7f7420e54f5f1018f21ca165f8f" kindref="member">__init__</ref>(self,<sp/>ip,<sp/>port=9090):</highlight></codeline>
<codeline lineno="19"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Constructor<sp/>for<sp/>ROSBridgeClient</highlight></codeline>
<codeline lineno="20"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="21"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Args:</highlight></codeline>
<codeline lineno="22"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ip<sp/>(str):<sp/>The<sp/>robot<sp/>IP<sp/>address.</highlight></codeline>
<codeline lineno="23"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>port<sp/>(int,<sp/>optional):<sp/>The<sp/>WebSocket<sp/>port<sp/>number<sp/>for<sp/>rosbridge.<sp/>Defaults<sp/>to<sp/>9090.</highlight></codeline>
<codeline lineno="24"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="25"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>WebSocketClient.__init__(self,<sp/></highlight><highlight class="stringliteral">&apos;ws://{}:{}&apos;</highlight><highlight class="normal">.format(ip,<sp/>port))</highlight></codeline>
<codeline lineno="26"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classrosbridge__client_1_1ROSBridgeClient_1a0cee4b49f835bbe9710a9bfd1daf59bb" kindref="member">_connected</ref><sp/>=<sp/></highlight><highlight class="keyword">False</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="27"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classrosbridge__client_1_1ROSBridgeClient_1ae3b41a371d887a2e32e4e9917f286257" kindref="member">_id_counter</ref><sp/>=<sp/>0</highlight></codeline>
<codeline lineno="28"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classrosbridge__client_1_1ROSBridgeClient_1ab2e175f81ef018536328c3a0ba91a858" kindref="member">_publishers</ref><sp/>=<sp/>{}</highlight></codeline>
<codeline lineno="29"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classrosbridge__client_1_1ROSBridgeClient_1a0f21fa1d7091416e7380880a42d5f298" kindref="member">_subscribers</ref><sp/>=<sp/>{}</highlight></codeline>
<codeline lineno="30"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classrosbridge__client_1_1ROSBridgeClient_1aae9b9dbf97b1c890e87ecc141cb68913" kindref="member">_services</ref><sp/>=<sp/>{}</highlight></codeline>
<codeline lineno="31"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classrosbridge__client_1_1ROSBridgeClient_1a6c456f26c6be461d2a585495f519db88" kindref="member">_action_clients</ref><sp/>=<sp/>{}</highlight></codeline>
<codeline lineno="32"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.connect()</highlight></codeline>
<codeline lineno="33"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>threading.Thread(target=self.run_forever).start()</highlight></codeline>
<codeline lineno="34"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>self.<ref refid="classrosbridge__client_1_1ROSBridgeClient_1a0cee4b49f835bbe9710a9bfd1daf59bb" kindref="member">_connected</ref>:</highlight></codeline>
<codeline lineno="35"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>time.sleep(0.1)</highlight></codeline>
<codeline lineno="36"><highlight class="normal"></highlight></codeline>
<codeline lineno="37"><highlight class="normal"><sp/><sp/><sp/><sp/>@property</highlight></codeline>
<codeline lineno="38"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classrosbridge__client_1_1ROSBridgeClient_1ae38cc794f42ac51f8be3989ac4fda18b" kindref="member">id_counter</ref>(self):</highlight></codeline>
<codeline lineno="39"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Generate<sp/>an<sp/>auto-incremental<sp/>ID<sp/>starts<sp/>from<sp/>1.</highlight></codeline>
<codeline lineno="40"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="41"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Returns:</highlight></codeline>
<codeline lineno="42"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>A<sp/>auto-incremented<sp/>ID.</highlight></codeline>
<codeline lineno="43"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="44"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classrosbridge__client_1_1ROSBridgeClient_1ae3b41a371d887a2e32e4e9917f286257" kindref="member">_id_counter</ref><sp/>+=<sp/>1</highlight></codeline>
<codeline lineno="45"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>self.<ref refid="classrosbridge__client_1_1ROSBridgeClient_1ae3b41a371d887a2e32e4e9917f286257" kindref="member">_id_counter</ref></highlight></codeline>
<codeline lineno="46"><highlight class="normal"></highlight></codeline>
<codeline lineno="47"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classrosbridge__client_1_1ROSBridgeClient_1abfde5092083f35ca46d2d355a4d0addf" kindref="member">publisher</ref>(self,<sp/>topic_name,<sp/>message_type,<sp/>latch=False,<sp/>queue_size=1):</highlight></codeline>
<codeline lineno="48"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Create<sp/>a<sp/>_Publisher<sp/>object<sp/>if<sp/>the<sp/>given<sp/>topic<sp/>hasn&apos;t<sp/>been<sp/>advertised,<sp/>otherwise<sp/>return<sp/>the<sp/>existing</highlight></codeline>
<codeline lineno="49"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>publisher<sp/>that<sp/>is<sp/>currently<sp/>advertising<sp/>the<sp/>topic.</highlight></codeline>
<codeline lineno="50"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="51"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Args:</highlight></codeline>
<codeline lineno="52"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>topic_name<sp/>(str):<sp/>The<sp/>ROS<sp/>topic<sp/>name.</highlight></codeline>
<codeline lineno="53"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>message_type<sp/>(str):<sp/>The<sp/>ROS<sp/>message<sp/>type,<sp/>such<sp/>as<sp/>`std_msgs/String`.</highlight></codeline>
<codeline lineno="54"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>latch<sp/>(bool,<sp/>optional):<sp/>Whether<sp/>the<sp/>topic<sp/>is<sp/>latched<sp/>when<sp/>publishing.<sp/>Defaults<sp/>to<sp/>False.</highlight></codeline>
<codeline lineno="55"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>queue_size<sp/>(int):<sp/>The<sp/>queue<sp/>created<sp/>at<sp/>bridge<sp/>side<sp/>for<sp/>re-publishing.<sp/>Defaults<sp/>to<sp/>1.</highlight></codeline>
<codeline lineno="56"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="57"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Returns:</highlight></codeline>
<codeline lineno="58"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>A<sp/>_Publisher<sp/>object.</highlight></codeline>
<codeline lineno="59"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="60"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>topic_name<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>self.<ref refid="classrosbridge__client_1_1ROSBridgeClient_1ab2e175f81ef018536328c3a0ba91a858" kindref="member">_publishers</ref>:</highlight></codeline>
<codeline lineno="61"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>publisher<sp/>=<sp/>self._publishers.get(topic_name)</highlight></codeline>
<codeline lineno="62"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>publisher.usage<sp/>+=<sp/>1</highlight></codeline>
<codeline lineno="63"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="64"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>print(</highlight><highlight class="stringliteral">&apos;Advertising<sp/>topic<sp/>{}<sp/>for<sp/>publishing&apos;</highlight><highlight class="normal">.format(topic_name))</highlight></codeline>
<codeline lineno="65"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>publisher<sp/>=<sp/><ref refid="classrosbridge__client_1_1__Publisher" kindref="compound">_Publisher</ref>(self,<sp/>topic_name,<sp/>message_type,<sp/>latch,<sp/>queue_size)</highlight></codeline>
<codeline lineno="66"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classrosbridge__client_1_1ROSBridgeClient_1ab2e175f81ef018536328c3a0ba91a858" kindref="member">_publishers</ref>[topic_name]<sp/>=<sp/>publisher</highlight></codeline>
<codeline lineno="67"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>publisher</highlight></codeline>
<codeline lineno="68"><highlight class="normal"></highlight></codeline>
<codeline lineno="69"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classrosbridge__client_1_1ROSBridgeClient_1aba3a71ffaa43a3be49e569bfd7132765" kindref="member">unregister_publisher</ref>(self,<sp/>topic_name):</highlight></codeline>
<codeline lineno="70"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Stop<sp/>advertising<sp/>on<sp/>the<sp/>given<sp/>topic.</highlight></codeline>
<codeline lineno="71"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="72"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Args:</highlight></codeline>
<codeline lineno="73"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>topic_name<sp/>(str):<sp/>The<sp/>ROS<sp/>topic<sp/>name.</highlight></codeline>
<codeline lineno="74"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="75"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>topic_name<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>self.<ref refid="classrosbridge__client_1_1ROSBridgeClient_1ab2e175f81ef018536328c3a0ba91a858" kindref="member">_publishers</ref>:</highlight></codeline>
<codeline lineno="76"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>print(</highlight><highlight class="stringliteral">&apos;Stop<sp/>advertising<sp/>topic<sp/>{}<sp/>for<sp/>publishing&apos;</highlight><highlight class="normal">.format(topic_name))</highlight></codeline>
<codeline lineno="77"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>del<sp/>self.<ref refid="classrosbridge__client_1_1ROSBridgeClient_1ab2e175f81ef018536328c3a0ba91a858" kindref="member">_publishers</ref>[topic_name]</highlight></codeline>
<codeline lineno="78"><highlight class="normal"></highlight></codeline>
<codeline lineno="79"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classrosbridge__client_1_1ROSBridgeClient_1a5848414ef65379d8f8fdd79d59daf788" kindref="member">subscriber</ref>(self,<sp/>topic_name,<sp/>message_type,<sp/>cb):</highlight></codeline>
<codeline lineno="80"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Create<sp/>a<sp/>_Subscriber<sp/>object<sp/>on<sp/>a<sp/>given<sp/>topic<sp/>with<sp/>a<sp/>callback<sp/>function.</highlight></codeline>
<codeline lineno="81"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="82"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>If<sp/>the<sp/>topic<sp/>hasn&apos;t<sp/>been<sp/>subscribed<sp/>yet,<sp/>subscribe<sp/>the<sp/>topic.<sp/>Otherwise,<sp/>it<sp/>adds<sp/>the<sp/>subscriber</highlight></codeline>
<codeline lineno="83"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>with<sp/>callback<sp/>function<sp/>into<sp/>the<sp/>topic<sp/>subscription<sp/>list.</highlight></codeline>
<codeline lineno="84"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="85"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Args:</highlight></codeline>
<codeline lineno="86"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>topic_name<sp/>(str):<sp/>The<sp/>ROS<sp/>topic<sp/>name.</highlight></codeline>
<codeline lineno="87"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>message_type<sp/>(str):<sp/>The<sp/>ROS<sp/>message<sp/>type,<sp/>such<sp/>as<sp/>`std_msgs/String`.</highlight></codeline>
<codeline lineno="88"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cb<sp/>(function):<sp/>A<sp/>function<sp/>will<sp/>be<sp/>called<sp/>when<sp/>a<sp/>message<sp/>is<sp/>received<sp/>on<sp/>that<sp/>topic.</highlight></codeline>
<codeline lineno="89"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="90"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Returns:</highlight></codeline>
<codeline lineno="91"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>A<sp/>_Subscriber<sp/>object.</highlight></codeline>
<codeline lineno="92"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="93"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>subscriber<sp/>=<sp/><ref refid="classrosbridge__client_1_1__Subscriber" kindref="compound">_Subscriber</ref>(self,<sp/>topic_name,<sp/>cb)</highlight></codeline>
<codeline lineno="94"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>topic_name<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>self.<ref refid="classrosbridge__client_1_1ROSBridgeClient_1a0f21fa1d7091416e7380880a42d5f298" kindref="member">_subscribers</ref>:</highlight></codeline>
<codeline lineno="95"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self._subscribers.get(topic_name).get(</highlight><highlight class="stringliteral">&apos;subscribers&apos;</highlight><highlight class="normal">).append(subscriber)</highlight></codeline>
<codeline lineno="96"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="97"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>subscribe_id<sp/>=<sp/></highlight><highlight class="stringliteral">&apos;subscribe:{}:{}&apos;</highlight><highlight class="normal">.format(topic_name,<sp/>self.<ref refid="classrosbridge__client_1_1ROSBridgeClient_1ae3b41a371d887a2e32e4e9917f286257" kindref="member">_id_counter</ref>)</highlight></codeline>
<codeline lineno="98"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>print(</highlight><highlight class="stringliteral">&apos;Sending<sp/>request<sp/>to<sp/>subscribe<sp/>topic<sp/>{}&apos;</highlight><highlight class="normal">.format(topic_name))</highlight></codeline>
<codeline lineno="99"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.send(json.dumps({</highlight></codeline>
<codeline lineno="100"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;op&apos;</highlight><highlight class="normal">:<sp/></highlight><highlight class="stringliteral">&apos;subscribe&apos;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="101"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;id&apos;</highlight><highlight class="normal">:<sp/>subscribe_id,</highlight></codeline>
<codeline lineno="102"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;topic&apos;</highlight><highlight class="normal">:<sp/>topic_name,</highlight></codeline>
<codeline lineno="103"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;type&apos;</highlight><highlight class="normal">:<sp/>message_type</highlight></codeline>
<codeline lineno="104"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}))</highlight></codeline>
<codeline lineno="105"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classrosbridge__client_1_1ROSBridgeClient_1a0f21fa1d7091416e7380880a42d5f298" kindref="member">_subscribers</ref>[topic_name]<sp/>=<sp/>{}</highlight></codeline>
<codeline lineno="106"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classrosbridge__client_1_1ROSBridgeClient_1a0f21fa1d7091416e7380880a42d5f298" kindref="member">_subscribers</ref>[topic_name][</highlight><highlight class="stringliteral">&apos;subscribe_id&apos;</highlight><highlight class="normal">]<sp/>=<sp/>subscribe_id</highlight></codeline>
<codeline lineno="107"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classrosbridge__client_1_1ROSBridgeClient_1a0f21fa1d7091416e7380880a42d5f298" kindref="member">_subscribers</ref>[topic_name][</highlight><highlight class="stringliteral">&apos;subscribers&apos;</highlight><highlight class="normal">]<sp/>=<sp/>[subscriber]</highlight></codeline>
<codeline lineno="108"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>subscriber</highlight></codeline>
<codeline lineno="109"><highlight class="normal"></highlight></codeline>
<codeline lineno="110"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classrosbridge__client_1_1ROSBridgeClient_1a934bed55ffd2cb06157cec98ed7d2efb" kindref="member">unsubscribe</ref>(self,<sp/>subscriber):</highlight></codeline>
<codeline lineno="111"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Remove<sp/>a<sp/>callback<sp/>subscriber<sp/>from<sp/>its<sp/>topic<sp/>subscription<sp/>list.</highlight></codeline>
<codeline lineno="112"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="113"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>If<sp/>there<sp/>is<sp/>no<sp/>callback<sp/>subscribers<sp/>in<sp/>the<sp/>subscription<sp/>list.<sp/>It<sp/>will<sp/>unsubscribe<sp/>the<sp/>topic.</highlight></codeline>
<codeline lineno="114"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="115"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Args:</highlight></codeline>
<codeline lineno="116"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>subscriber<sp/>(_Subscriber):<sp/>A<sp/>subscriber<sp/>with<sp/>callback<sp/>function<sp/>that<sp/>listen<sp/>to<sp/>the<sp/>topic.</highlight></codeline>
<codeline lineno="117"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="118"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>topic_name<sp/>=<sp/>subscriber.topic_name</highlight></codeline>
<codeline lineno="119"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>topic_name<sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>self.<ref refid="classrosbridge__client_1_1ROSBridgeClient_1a0f21fa1d7091416e7380880a42d5f298" kindref="member">_subscribers</ref>:</highlight></codeline>
<codeline lineno="120"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="121"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>subscribe_id<sp/>=<sp/>self._subscribers.get(topic_name).get(</highlight><highlight class="stringliteral">&apos;subscribe_id&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="122"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>subscribers<sp/>=<sp/>self._subscribers.get(topic_name).get(</highlight><highlight class="stringliteral">&apos;subscribers&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="123"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>subscriber<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>subscribers:</highlight></codeline>
<codeline lineno="124"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>subscribers.remove(subscriber)</highlight></codeline>
<codeline lineno="125"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>len(subscribers)<sp/>==<sp/>0:</highlight></codeline>
<codeline lineno="126"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>print(</highlight><highlight class="stringliteral">&apos;Sending<sp/>request<sp/>to<sp/>unsubscribe<sp/>topic<sp/>{}&apos;</highlight><highlight class="normal">.format(topic_name))</highlight></codeline>
<codeline lineno="127"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>del<sp/>subscribers[:]</highlight></codeline>
<codeline lineno="128"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.send(json.dumps({</highlight></codeline>
<codeline lineno="129"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;op&apos;</highlight><highlight class="normal">:<sp/></highlight><highlight class="stringliteral">&apos;unsubscribe&apos;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="130"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;id&apos;</highlight><highlight class="normal">:<sp/>subscribe_id,</highlight></codeline>
<codeline lineno="131"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;topic&apos;</highlight><highlight class="normal">:<sp/>topic_name</highlight></codeline>
<codeline lineno="132"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}))</highlight></codeline>
<codeline lineno="133"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>del<sp/>self.<ref refid="classrosbridge__client_1_1ROSBridgeClient_1a0f21fa1d7091416e7380880a42d5f298" kindref="member">_subscribers</ref>[topic_name]</highlight></codeline>
<codeline lineno="134"><highlight class="normal"></highlight></codeline>
<codeline lineno="135"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classrosbridge__client_1_1ROSBridgeClient_1acd8c490a49fd9cd64468dfac2b9580a5" kindref="member">service</ref>(self,<sp/>service_name,<sp/>service_type):</highlight></codeline>
<codeline lineno="136"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Create<sp/>a<sp/>ROS<sp/>service<sp/>client.</highlight></codeline>
<codeline lineno="137"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="138"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Args:</highlight></codeline>
<codeline lineno="139"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>service_name<sp/>(str):<sp/>The<sp/>ROS<sp/>service<sp/>name.</highlight></codeline>
<codeline lineno="140"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>service_type<sp/>(str):<sp/>The<sp/>ROS<sp/>service<sp/>type.</highlight></codeline>
<codeline lineno="141"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="142"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Returns:</highlight></codeline>
<codeline lineno="143"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>A<sp/>_Service<sp/>object.</highlight></codeline>
<codeline lineno="144"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="145"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="classrosbridge__client_1_1__Service" kindref="compound">_Service</ref>(self,<sp/>service_name,<sp/>service_type)</highlight></codeline>
<codeline lineno="146"><highlight class="normal"></highlight></codeline>
<codeline lineno="147"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classrosbridge__client_1_1ROSBridgeClient_1ab4ebda6ee5ec77c64160110bb7155928" kindref="member">register_service_callback</ref>(self,<sp/>service_id,<sp/>cb):</highlight></codeline>
<codeline lineno="148"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Register<sp/>a<sp/>service<sp/>callback<sp/>with<sp/>a<sp/>service<sp/>request<sp/>ID.</highlight></codeline>
<codeline lineno="149"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="150"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Args:</highlight></codeline>
<codeline lineno="151"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>service_id<sp/>(str):<sp/>The<sp/>service<sp/>request<sp/>ID.</highlight></codeline>
<codeline lineno="152"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cb<sp/>(function):<sp/>A<sp/>function<sp/>will<sp/>be<sp/>called<sp/>when<sp/>the<sp/>service<sp/>server<sp/>responses.</highlight></codeline>
<codeline lineno="153"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="154"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classrosbridge__client_1_1ROSBridgeClient_1aae9b9dbf97b1c890e87ecc141cb68913" kindref="member">_services</ref>[service_id]<sp/>=<sp/>cb</highlight></codeline>
<codeline lineno="155"><highlight class="normal"></highlight></codeline>
<codeline lineno="156"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classrosbridge__client_1_1ROSBridgeClient_1ac1df1881e665ae4078ce957fdf32160b" kindref="member">action_client</ref>(self,<sp/>server_name,<sp/>action_name):</highlight></codeline>
<codeline lineno="157"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Create<sp/>a<sp/>ROS<sp/>action<sp/>client<sp/>if<sp/>there<sp/>was<sp/>no<sp/>client<sp/>created<sp/>for<sp/>the<sp/>action<sp/>server.</highlight></codeline>
<codeline lineno="158"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Otherwise<sp/>return<sp/>that<sp/>action<sp/>client.</highlight></codeline>
<codeline lineno="159"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="160"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Args:</highlight></codeline>
<codeline lineno="161"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>server_name<sp/>(str):<sp/>The<sp/>ROS<sp/>action<sp/>server<sp/>name.</highlight></codeline>
<codeline lineno="162"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>action_name<sp/>(str):<sp/>The<sp/>ROS<sp/>action<sp/>name.</highlight></codeline>
<codeline lineno="163"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="164"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Returns:</highlight></codeline>
<codeline lineno="165"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>A<sp/>_ActionClient<sp/>object.</highlight></codeline>
<codeline lineno="166"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="167"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>server_name<sp/>+<sp/></highlight><highlight class="stringliteral">&apos;:&apos;</highlight><highlight class="normal"><sp/>+<sp/>action_name<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>self.<ref refid="classrosbridge__client_1_1ROSBridgeClient_1a6c456f26c6be461d2a585495f519db88" kindref="member">_action_clients</ref>:</highlight></codeline>
<codeline lineno="168"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>action_client<sp/>=<sp/>self._action_clients.get(server_name<sp/>+<sp/></highlight><highlight class="stringliteral">&apos;:&apos;</highlight><highlight class="normal"><sp/>+<sp/>action_name).get(</highlight><highlight class="stringliteral">&apos;action_client&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="169"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>action_client.usage<sp/>+=<sp/>1</highlight></codeline>
<codeline lineno="170"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="171"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>action_client<sp/>=<sp/><ref refid="classrosbridge__client_1_1__ActionClient" kindref="compound">_ActionClient</ref>(self,<sp/>server_name,<sp/>action_name)</highlight></codeline>
<codeline lineno="172"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>action_client</highlight></codeline>
<codeline lineno="173"><highlight class="normal"></highlight></codeline>
<codeline lineno="174"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classrosbridge__client_1_1ROSBridgeClient_1adbc3a76d30b6b1ad90721dce99da7253" kindref="member">unregister_action_client</ref>(self,<sp/>server_name,<sp/>action_name):</highlight></codeline>
<codeline lineno="175"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Unregister<sp/>the<sp/>action<sp/>client<sp/>with<sp/>server<sp/>and<sp/>action<sp/>name.<sp/>Remove<sp/>it<sp/>from<sp/>the<sp/>internal<sp/>action<sp/>client<sp/>dict.</highlight></codeline>
<codeline lineno="176"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="177"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Args:</highlight></codeline>
<codeline lineno="178"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>server_name<sp/>(str):<sp/>The<sp/>ROS<sp/>action<sp/>server<sp/>name.</highlight></codeline>
<codeline lineno="179"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>action_name<sp/>(str):<sp/>The<sp/>ROS<sp/>action<sp/>name.</highlight></codeline>
<codeline lineno="180"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="181"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>server_name<sp/>+<sp/></highlight><highlight class="stringliteral">&apos;:&apos;</highlight><highlight class="normal"><sp/>+<sp/>action_name<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>self.<ref refid="classrosbridge__client_1_1ROSBridgeClient_1a6c456f26c6be461d2a585495f519db88" kindref="member">_action_clients</ref>:</highlight></codeline>
<codeline lineno="182"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>del<sp/>self.<ref refid="classrosbridge__client_1_1ROSBridgeClient_1a6c456f26c6be461d2a585495f519db88" kindref="member">_action_clients</ref>[server_name<sp/>+<sp/></highlight><highlight class="stringliteral">&apos;:&apos;</highlight><highlight class="normal"><sp/>+<sp/>action_name]</highlight></codeline>
<codeline lineno="183"><highlight class="normal"></highlight></codeline>
<codeline lineno="184"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classrosbridge__client_1_1ROSBridgeClient_1a2f9d6ba51cef6f6569ed7178ddbd6a7e" kindref="member">opened</ref>(self):</highlight></codeline>
<codeline lineno="185"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Called<sp/>when<sp/>the<sp/>connection<sp/>to<sp/>ROS<sp/>established.&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="186"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classrosbridge__client_1_1ROSBridgeClient_1a0cee4b49f835bbe9710a9bfd1daf59bb" kindref="member">_connected</ref><sp/>=<sp/></highlight><highlight class="keyword">True</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="187"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>print(</highlight><highlight class="stringliteral">&apos;Connected<sp/>with<sp/>rosbridge&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="188"><highlight class="normal"></highlight></codeline>
<codeline lineno="189"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classrosbridge__client_1_1ROSBridgeClient_1ae7563ccdf301dac0e121c67ac7b5bb29" kindref="member">closed</ref>(self,<sp/>code,<sp/>reason=None):</highlight></codeline>
<codeline lineno="190"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Called<sp/>when<sp/>the<sp/>connection<sp/>to<sp/>ROS<sp/>disconnected</highlight></codeline>
<codeline lineno="191"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="192"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Args:</highlight></codeline>
<codeline lineno="193"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>code<sp/>(int):<sp/>A<sp/>status<sp/>code.</highlight></codeline>
<codeline lineno="194"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>reason<sp/>(str,<sp/>opitonal):<sp/>A<sp/>human<sp/>readable<sp/>message.<sp/>Defaults<sp/>to<sp/>None.</highlight></codeline>
<codeline lineno="195"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="196"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>print(</highlight><highlight class="stringliteral">&apos;Disconnected<sp/>with<sp/>rosbridge&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="197"><highlight class="normal"></highlight></codeline>
<codeline lineno="198"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classrosbridge__client_1_1ROSBridgeClient_1a08b399d6d5818adac190fa13f1de362e" kindref="member">received_message</ref>(self,<sp/>message):</highlight></codeline>
<codeline lineno="199"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Called<sp/>when<sp/>message<sp/>received<sp/>from<sp/>ROS<sp/>server.</highlight></codeline>
<codeline lineno="200"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="201"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Only<sp/>handle<sp/>the<sp/>message<sp/>with<sp/>`topic`<sp/>or<sp/>`service`<sp/>keywords<sp/>and<sp/>trigger<sp/>corresponding<sp/>callback<sp/>functions.</highlight></codeline>
<codeline lineno="202"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="203"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Args:</highlight></codeline>
<codeline lineno="204"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>message(ws4py.messaging.Message):<sp/>A<sp/>message<sp/>that<sp/>sent<sp/>from<sp/>ROS<sp/>server.</highlight></codeline>
<codeline lineno="205"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="206"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>message.data<sp/>=<sp/>message.data.decode()</highlight></codeline>
<codeline lineno="207"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>data<sp/>=<sp/>json.loads(message.data)</highlight></codeline>
<codeline lineno="208"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/></highlight><highlight class="stringliteral">&apos;topic&apos;</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>data:</highlight></codeline>
<codeline lineno="209"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dispatcher.send(data.get(</highlight><highlight class="stringliteral">&apos;topic&apos;</highlight><highlight class="normal">),<sp/>message=data.get(</highlight><highlight class="stringliteral">&apos;msg&apos;</highlight><highlight class="normal">))</highlight></codeline>
<codeline lineno="210"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/></highlight><highlight class="stringliteral">&apos;service&apos;</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>data:</highlight></codeline>
<codeline lineno="211"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>service_id<sp/>=<sp/>data.get(</highlight><highlight class="stringliteral">&apos;id&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="212"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>success<sp/>=<sp/>data.get(</highlight><highlight class="stringliteral">&apos;result&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="213"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>values<sp/>=<sp/>data.get(</highlight><highlight class="stringliteral">&apos;values&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="214"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>service_id<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>self.<ref refid="classrosbridge__client_1_1ROSBridgeClient_1aae9b9dbf97b1c890e87ecc141cb68913" kindref="member">_services</ref>:</highlight></codeline>
<codeline lineno="215"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classrosbridge__client_1_1ROSBridgeClient_1aae9b9dbf97b1c890e87ecc141cb68913" kindref="member">_services</ref>[service_id](success,<sp/>values)</highlight></codeline>
<codeline lineno="216"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>del<sp/>self.<ref refid="classrosbridge__client_1_1ROSBridgeClient_1aae9b9dbf97b1c890e87ecc141cb68913" kindref="member">_services</ref>[service_id]</highlight></codeline>
<codeline lineno="217"><highlight class="normal"></highlight></codeline>
<codeline lineno="218"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classrosbridge__client_1_1ROSBridgeClient_1ac913d8903d90cd20c6ecdbee1e05edfb" kindref="member">unhandled_error</ref>(self,<sp/>error):</highlight></codeline>
<codeline lineno="219"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Called<sp/>when<sp/>a<sp/>socket<sp/>or<sp/>OS<sp/>error<sp/>is<sp/>raised.</highlight></codeline>
<codeline lineno="220"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="221"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Args:</highlight></codeline>
<codeline lineno="222"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>error<sp/>(str):<sp/>A<sp/>human<sp/>readable<sp/>error<sp/>message.</highlight></codeline>
<codeline lineno="223"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="224"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>print(error)</highlight></codeline>
<codeline lineno="225"><highlight class="normal"></highlight></codeline>
<codeline lineno="226"><highlight class="normal"></highlight></codeline>
<codeline lineno="227" refid="classrosbridge__client_1_1__Publisher" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">class<sp/></highlight><highlight class="normal"><ref refid="classrosbridge__client_1_1__Publisher" kindref="compound">_Publisher</ref>(object):</highlight></codeline>
<codeline lineno="228"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classrosbridge__client_1_1__Publisher_1aa73fbe39915557c7c500db88e9e43bb6" kindref="member">__init__</ref>(self,<sp/>rosbridge,<sp/>topic_name,<sp/>message_type,<sp/>latch=False,<sp/>queue_size=1):</highlight></codeline>
<codeline lineno="229"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Constructor<sp/>for<sp/>_Publisher.</highlight></codeline>
<codeline lineno="230"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="231"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Args:</highlight></codeline>
<codeline lineno="232"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>rosbridge<sp/>(ROSBridgeClient):<sp/>The<sp/>ROSBridgeClient<sp/>object.</highlight></codeline>
<codeline lineno="233"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>topic_name<sp/>(str):<sp/>The<sp/>ROS<sp/>topic<sp/>name.</highlight></codeline>
<codeline lineno="234"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>message_type<sp/>(str):<sp/>The<sp/>ROS<sp/>message<sp/>type,<sp/>such<sp/>as<sp/>`std_msgs/String`.</highlight></codeline>
<codeline lineno="235"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>latch<sp/>(bool,<sp/>optional):<sp/>Whether<sp/>the<sp/>topic<sp/>is<sp/>latched<sp/>when<sp/>publishing.<sp/>Defaults<sp/>to<sp/>False.</highlight></codeline>
<codeline lineno="236"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>queue_size<sp/>(int):<sp/>The<sp/>queue<sp/>created<sp/>at<sp/>bridge<sp/>side<sp/>for<sp/>re-publishing.<sp/>Defaults<sp/>to<sp/>1.</highlight></codeline>
<codeline lineno="237"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="238"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classrosbridge__client_1_1__Publisher_1a4546a3cb3dc11fb11b206664ed2f7727" kindref="member">_advertise_id</ref><sp/>=<sp/></highlight><highlight class="stringliteral">&apos;advertise:{}:{}&apos;</highlight><highlight class="normal">.format(topic_name,<sp/>rosbridge.id_counter)</highlight></codeline>
<codeline lineno="239"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classrosbridge__client_1_1__Publisher_1ae763168cddfae302fdf13ae0f8432de6" kindref="member">_rosbridge</ref><sp/>=<sp/>rosbridge</highlight></codeline>
<codeline lineno="240"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classrosbridge__client_1_1__Publisher_1a928221829b6a88fe7516a229161c15d6" kindref="member">_topic_name</ref><sp/>=<sp/>topic_name</highlight></codeline>
<codeline lineno="241"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classrosbridge__client_1_1__Publisher_1a0fa029e553eaf954bcf6adf1e29235f6" kindref="member">_usage</ref><sp/>=<sp/>1</highlight></codeline>
<codeline lineno="242"><highlight class="normal"></highlight></codeline>
<codeline lineno="243"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>rosbridge.send(json.dumps({</highlight></codeline>
<codeline lineno="244"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;op&apos;</highlight><highlight class="normal">:<sp/></highlight><highlight class="stringliteral">&apos;advertise&apos;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="245"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;id&apos;</highlight><highlight class="normal">:<sp/>self.<ref refid="classrosbridge__client_1_1__Publisher_1a4546a3cb3dc11fb11b206664ed2f7727" kindref="member">_advertise_id</ref>,</highlight></codeline>
<codeline lineno="246"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;topic&apos;</highlight><highlight class="normal">:<sp/>topic_name,</highlight></codeline>
<codeline lineno="247"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;type&apos;</highlight><highlight class="normal">:<sp/>message_type,</highlight></codeline>
<codeline lineno="248"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;latch&apos;</highlight><highlight class="normal">:<sp/>latch,</highlight></codeline>
<codeline lineno="249"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;queue_size&apos;</highlight><highlight class="normal">:<sp/>queue_size</highlight></codeline>
<codeline lineno="250"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}))</highlight></codeline>
<codeline lineno="251"><highlight class="normal"></highlight></codeline>
<codeline lineno="252"><highlight class="normal"><sp/><sp/><sp/><sp/>@property</highlight></codeline>
<codeline lineno="253"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal">usage(self):</highlight></codeline>
<codeline lineno="254"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>self.<ref refid="classrosbridge__client_1_1__Publisher_1a0fa029e553eaf954bcf6adf1e29235f6" kindref="member">_usage</ref></highlight></codeline>
<codeline lineno="255"><highlight class="normal"></highlight></codeline>
<codeline lineno="256"><highlight class="normal"><sp/><sp/><sp/><sp/>@usage.setter</highlight></codeline>
<codeline lineno="257"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal">usage(self,<sp/>value):</highlight></codeline>
<codeline lineno="258"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classrosbridge__client_1_1__Publisher_1a0fa029e553eaf954bcf6adf1e29235f6" kindref="member">_usage</ref><sp/>=<sp/>value</highlight></codeline>
<codeline lineno="259"><highlight class="normal"></highlight></codeline>
<codeline lineno="260"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classrosbridge__client_1_1__Publisher_1ab0700e489fe42d4c7585fcb7f077946b" kindref="member">publish</ref>(self,<sp/>message):</highlight></codeline>
<codeline lineno="261"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Publish<sp/>a<sp/>ROS<sp/>message</highlight></codeline>
<codeline lineno="262"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="263"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Args:</highlight></codeline>
<codeline lineno="264"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>message<sp/>(dict):<sp/>A<sp/>message<sp/>to<sp/>send.</highlight></codeline>
<codeline lineno="265"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="266"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self._rosbridge.send(json.dumps({</highlight></codeline>
<codeline lineno="267"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;op&apos;</highlight><highlight class="normal">:<sp/></highlight><highlight class="stringliteral">&apos;publish&apos;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="268"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;id&apos;</highlight><highlight class="normal">:<sp/></highlight><highlight class="stringliteral">&apos;publish:{}:{}&apos;</highlight><highlight class="normal">.format(self.<ref refid="classrosbridge__client_1_1__Publisher_1a928221829b6a88fe7516a229161c15d6" kindref="member">_topic_name</ref>,<sp/>self._rosbridge.id_counter),</highlight></codeline>
<codeline lineno="269"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;topic&apos;</highlight><highlight class="normal">:<sp/>self.<ref refid="classrosbridge__client_1_1__Publisher_1a928221829b6a88fe7516a229161c15d6" kindref="member">_topic_name</ref>,</highlight></codeline>
<codeline lineno="270"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;msg&apos;</highlight><highlight class="normal">:<sp/>message</highlight></codeline>
<codeline lineno="271"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}))</highlight></codeline>
<codeline lineno="272"><highlight class="normal"></highlight></codeline>
<codeline lineno="273"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classrosbridge__client_1_1__Publisher_1adc817bc6d8ceec2c45f33fb91cea9156" kindref="member">unregister</ref>(self):</highlight></codeline>
<codeline lineno="274"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Reduce<sp/>the<sp/>usage<sp/>of<sp/>the<sp/>publisher.<sp/>If<sp/>the<sp/>usage<sp/>is<sp/>0,<sp/>unadvertise<sp/>this<sp/>topic.&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="275"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classrosbridge__client_1_1__Publisher_1a0fa029e553eaf954bcf6adf1e29235f6" kindref="member">_usage</ref><sp/>-=<sp/>1</highlight></codeline>
<codeline lineno="276"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>self.<ref refid="classrosbridge__client_1_1__Publisher_1a0fa029e553eaf954bcf6adf1e29235f6" kindref="member">_usage</ref><sp/>==<sp/>0:</highlight></codeline>
<codeline lineno="277"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self._rosbridge.unregister_publisher(self.<ref refid="classrosbridge__client_1_1__Publisher_1a928221829b6a88fe7516a229161c15d6" kindref="member">_topic_name</ref>)</highlight></codeline>
<codeline lineno="278"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self._rosbridge.send(json.dumps({</highlight></codeline>
<codeline lineno="279"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;op&apos;</highlight><highlight class="normal">:<sp/></highlight><highlight class="stringliteral">&apos;unadvertise&apos;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="280"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;id&apos;</highlight><highlight class="normal">:<sp/>self.<ref refid="classrosbridge__client_1_1__Publisher_1a4546a3cb3dc11fb11b206664ed2f7727" kindref="member">_advertise_id</ref>,</highlight></codeline>
<codeline lineno="281"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;topic&apos;</highlight><highlight class="normal">:<sp/>self.<ref refid="classrosbridge__client_1_1__Publisher_1a928221829b6a88fe7516a229161c15d6" kindref="member">_topic_name</ref></highlight></codeline>
<codeline lineno="282"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}))</highlight></codeline>
<codeline lineno="283"><highlight class="normal"></highlight></codeline>
<codeline lineno="284"><highlight class="normal"></highlight></codeline>
<codeline lineno="285" refid="classrosbridge__client_1_1__Subscriber" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">class<sp/></highlight><highlight class="normal"><ref refid="classrosbridge__client_1_1__Subscriber" kindref="compound">_Subscriber</ref>(object):</highlight></codeline>
<codeline lineno="286"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classrosbridge__client_1_1__Subscriber_1ab7f1f516b3180b06e0f610f3874549c1" kindref="member">__init__</ref>(self,<sp/>rosbridge,<sp/>topic_name,<sp/>cb=None):</highlight></codeline>
<codeline lineno="287"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Constructor<sp/>for<sp/>_Subscriber.</highlight></codeline>
<codeline lineno="288"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="289"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Args:</highlight></codeline>
<codeline lineno="290"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>rosbridge<sp/>(ROSBridgeClient):<sp/>The<sp/>ROSBridgeClient<sp/>object.</highlight></codeline>
<codeline lineno="291"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>topic_name<sp/>(str):<sp/>The<sp/>ROS<sp/>topic<sp/>name.</highlight></codeline>
<codeline lineno="292"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cb<sp/>(function):<sp/>A<sp/>function<sp/>will<sp/>be<sp/>called<sp/>when<sp/>a<sp/>message<sp/>is<sp/>received<sp/>on<sp/>that<sp/>topic.</highlight></codeline>
<codeline lineno="293"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="294"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classrosbridge__client_1_1__Subscriber_1a6e33ba05393e9b5e85a81885db41ae16" kindref="member">_rosbridge</ref><sp/>=<sp/>rosbridge</highlight></codeline>
<codeline lineno="295"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classrosbridge__client_1_1__Subscriber_1a503a8ed99729f922695dd3bee9b35db6" kindref="member">_topic_name</ref><sp/>=<sp/>topic_name</highlight></codeline>
<codeline lineno="296"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classrosbridge__client_1_1__Subscriber_1a6663857e21ffbf0f4c23371f541aa26e" kindref="member">_cb</ref><sp/>=<sp/>cb</highlight></codeline>
<codeline lineno="297"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>callable(self.<ref refid="classrosbridge__client_1_1__Subscriber_1a6663857e21ffbf0f4c23371f541aa26e" kindref="member">_cb</ref>):</highlight></codeline>
<codeline lineno="298"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dispatcher.connect(self.<ref refid="classrosbridge__client_1_1__Subscriber_1a6663857e21ffbf0f4c23371f541aa26e" kindref="member">_cb</ref>,<sp/>signal=topic_name)</highlight></codeline>
<codeline lineno="299"><highlight class="normal"></highlight></codeline>
<codeline lineno="300"><highlight class="normal"><sp/><sp/><sp/><sp/>@property</highlight></codeline>
<codeline lineno="301"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal">topic_name(self):</highlight></codeline>
<codeline lineno="302"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>self.<ref refid="classrosbridge__client_1_1__Subscriber_1a503a8ed99729f922695dd3bee9b35db6" kindref="member">_topic_name</ref></highlight></codeline>
<codeline lineno="303"><highlight class="normal"></highlight></codeline>
<codeline lineno="304"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classrosbridge__client_1_1__Subscriber_1a69094f92927d9978e1ece3ac3f277a26" kindref="member">unregister</ref>(self):</highlight></codeline>
<codeline lineno="305"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Remove<sp/>the<sp/>current<sp/>callback<sp/>function<sp/>from<sp/>listening<sp/>to<sp/>the<sp/>topic,</highlight></codeline>
<codeline lineno="306"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>and<sp/>from<sp/>the<sp/>rosbridge<sp/>client<sp/>subscription<sp/>list</highlight></codeline>
<codeline lineno="307"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="308"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>callable(self.<ref refid="classrosbridge__client_1_1__Subscriber_1a6663857e21ffbf0f4c23371f541aa26e" kindref="member">_cb</ref>):</highlight></codeline>
<codeline lineno="309"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dispatcher.disconnect(self.<ref refid="classrosbridge__client_1_1__Subscriber_1a6663857e21ffbf0f4c23371f541aa26e" kindref="member">_cb</ref>,<sp/>signal=self.<ref refid="classrosbridge__client_1_1__Subscriber_1a503a8ed99729f922695dd3bee9b35db6" kindref="member">_topic_name</ref>)</highlight></codeline>
<codeline lineno="310"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self._rosbridge.unsubscribe(self)</highlight></codeline>
<codeline lineno="311"><highlight class="normal"></highlight></codeline>
<codeline lineno="312"><highlight class="normal"></highlight></codeline>
<codeline lineno="313" refid="classrosbridge__client_1_1__Service" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">class<sp/></highlight><highlight class="normal"><ref refid="classrosbridge__client_1_1__Service" kindref="compound">_Service</ref>(object):</highlight></codeline>
<codeline lineno="314"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classrosbridge__client_1_1__Service_1a55d6c8132adfb0d9ebf18e4b45d6c5e1" kindref="member">__init__</ref>(self,<sp/>rosbridge,<sp/>service_name,<sp/>service_type):</highlight></codeline>
<codeline lineno="315"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Constructor<sp/>for<sp/>_Service.</highlight></codeline>
<codeline lineno="316"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="317"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Args:</highlight></codeline>
<codeline lineno="318"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>rosbridge<sp/>(ROSBridgeClient):<sp/>The<sp/>ROSBridgeClient<sp/>object.</highlight></codeline>
<codeline lineno="319"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>service_name<sp/>(str):<sp/>The<sp/>ROS<sp/>service<sp/>name.</highlight></codeline>
<codeline lineno="320"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>service_type<sp/>(str):<sp/>The<sp/>ROS<sp/>service<sp/>type.</highlight></codeline>
<codeline lineno="321"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="322"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classrosbridge__client_1_1__Service_1a74cd10b86d6a9396e86d8e380f241148" kindref="member">_rosbridge</ref><sp/>=<sp/>rosbridge</highlight></codeline>
<codeline lineno="323"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classrosbridge__client_1_1__Service_1a4725af62b96e71fd6685650f66dd6958" kindref="member">_service_name</ref><sp/>=<sp/>service_name</highlight></codeline>
<codeline lineno="324"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classrosbridge__client_1_1__Service_1a65e0f7e2da15ae3e116fac89b2fa6712" kindref="member">_service_type</ref><sp/>=<sp/>service_type</highlight></codeline>
<codeline lineno="325"><highlight class="normal"></highlight></codeline>
<codeline lineno="326"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classrosbridge__client_1_1__Service_1a60d88b1c0d9e5def5e7802928453b451" kindref="member">request</ref>(self,<sp/>request,<sp/>cb):</highlight></codeline>
<codeline lineno="327"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Send<sp/>a<sp/>request<sp/>to<sp/>the<sp/>ROS<sp/>service<sp/>server.<sp/>The<sp/>callback<sp/>function<sp/>will<sp/>be<sp/>called<sp/>when<sp/>service<sp/>responses.</highlight></codeline>
<codeline lineno="328"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="329"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Args:</highlight></codeline>
<codeline lineno="330"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>request<sp/>(dict):<sp/>A<sp/>request<sp/>message<sp/>to<sp/>send,</highlight></codeline>
<codeline lineno="331"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cb<sp/>(function):<sp/>A<sp/>function<sp/>will<sp/>be<sp/>called<sp/>when<sp/>the<sp/>service<sp/>server<sp/>responses.</highlight></codeline>
<codeline lineno="332"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="333"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Returns:</highlight></codeline>
<codeline lineno="334"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="335"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="336"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>service_id<sp/>=<sp/></highlight><highlight class="stringliteral">&apos;call_service:{}:{}&apos;</highlight><highlight class="normal">.format(self.<ref refid="classrosbridge__client_1_1__Service_1a4725af62b96e71fd6685650f66dd6958" kindref="member">_service_name</ref>,<sp/>self._rosbridge.id_counter)</highlight></codeline>
<codeline lineno="337"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>callable(cb):</highlight></codeline>
<codeline lineno="338"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self._rosbridge.register_service_callback(service_id,<sp/>cb)</highlight></codeline>
<codeline lineno="339"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self._rosbridge.send(json.dumps({</highlight></codeline>
<codeline lineno="340"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;op&apos;</highlight><highlight class="normal">:<sp/></highlight><highlight class="stringliteral">&apos;call_service&apos;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="341"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;id&apos;</highlight><highlight class="normal">:<sp/>service_id,</highlight></codeline>
<codeline lineno="342"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;service&apos;</highlight><highlight class="normal">:<sp/>self.<ref refid="classrosbridge__client_1_1__Service_1a4725af62b96e71fd6685650f66dd6958" kindref="member">_service_name</ref>,</highlight></codeline>
<codeline lineno="343"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;args&apos;</highlight><highlight class="normal">:<sp/>request</highlight></codeline>
<codeline lineno="344"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}))</highlight></codeline>
<codeline lineno="345"><highlight class="normal"></highlight></codeline>
<codeline lineno="346"><highlight class="normal"></highlight></codeline>
<codeline lineno="347" refid="classrosbridge__client_1_1__ActionClient" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">class<sp/></highlight><highlight class="normal"><ref refid="classrosbridge__client_1_1__ActionClient" kindref="compound">_ActionClient</ref>(object):</highlight></codeline>
<codeline lineno="348"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classrosbridge__client_1_1__ActionClient_1a79b86d9a4c6909ecfc44b7ffbd091354" kindref="member">__init__</ref>(self,<sp/>rosbridge,<sp/>server_name,<sp/>action_name):</highlight></codeline>
<codeline lineno="349"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Constructor<sp/>for<sp/>_ActionClient</highlight></codeline>
<codeline lineno="350"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="351"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Args:</highlight></codeline>
<codeline lineno="352"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>rosbridge<sp/>(ROSBridgeClient):<sp/>The<sp/>ROSBridgeClient<sp/>object.</highlight></codeline>
<codeline lineno="353"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>server_name<sp/>(str):<sp/>The<sp/>ROS<sp/>action<sp/>server<sp/>name.</highlight></codeline>
<codeline lineno="354"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>action_name<sp/>(str):<sp/>The<sp/>ROS<sp/>action<sp/>name.</highlight></codeline>
<codeline lineno="355"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="356"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classrosbridge__client_1_1__ActionClient_1aea43fc9a3e74f1f21cdaed3cb4b816c1" kindref="member">_rosbridge</ref><sp/>=<sp/>rosbridge</highlight></codeline>
<codeline lineno="357"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classrosbridge__client_1_1__ActionClient_1afdba23026c3ac9004782756aad75ccb5" kindref="member">_server_name</ref><sp/>=<sp/>server_name</highlight></codeline>
<codeline lineno="358"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classrosbridge__client_1_1__ActionClient_1ab673b59785c8be6009433598129cf8e0" kindref="member">_action_name</ref><sp/>=<sp/>action_name</highlight></codeline>
<codeline lineno="359"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classrosbridge__client_1_1__ActionClient_1a6de7dd1134d12b6c0f3ba12a4503d152" kindref="member">_goals</ref><sp/>=<sp/>{}</highlight></codeline>
<codeline lineno="360"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classrosbridge__client_1_1__ActionClient_1a1030e35ca5042d1af61220da421fce9a" kindref="member">_usage</ref><sp/>=<sp/>1</highlight></codeline>
<codeline lineno="361"><highlight class="normal"></highlight></codeline>
<codeline lineno="362"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classrosbridge__client_1_1__ActionClient_1a17803bc896ee32e938e87123e9c9758f" kindref="member">_feedback_sub</ref><sp/>=<sp/>rosbridge.subscriber(server_name+</highlight><highlight class="stringliteral">&apos;/feedback&apos;</highlight><highlight class="normal">,<sp/>action_name+</highlight><highlight class="stringliteral">&apos;Feedback&apos;</highlight><highlight class="normal">,<sp/>self.<ref refid="classrosbridge__client_1_1__ActionClient_1adbf822ca30fcae15faf0ad080f0c6be2" kindref="member">on_feedback</ref>)</highlight></codeline>
<codeline lineno="363"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classrosbridge__client_1_1__ActionClient_1a6e015166cfe0364f27ce19b6acbc812d" kindref="member">_result_sub</ref><sp/>=<sp/>rosbridge.subscriber(server_name+</highlight><highlight class="stringliteral">&apos;/result&apos;</highlight><highlight class="normal">,<sp/>action_name+</highlight><highlight class="stringliteral">&apos;Result&apos;</highlight><highlight class="normal">,<sp/>self.<ref refid="classrosbridge__client_1_1__ActionClient_1ada532b56ed3d4a383212b0e54670545f" kindref="member">on_result</ref>)</highlight></codeline>
<codeline lineno="364"><highlight class="normal"></highlight></codeline>
<codeline lineno="365"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classrosbridge__client_1_1__ActionClient_1a886bd52c0740e529e60ace1354ec0352" kindref="member">_goal_pub</ref><sp/>=<sp/>rosbridge.publisher(server_name+</highlight><highlight class="stringliteral">&apos;/goal&apos;</highlight><highlight class="normal">,<sp/>action_name+</highlight><highlight class="stringliteral">&apos;Goal&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="366"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classrosbridge__client_1_1__ActionClient_1ae834733fac5595d990f213783f2f1db2" kindref="member">_cancel_pub</ref><sp/>=<sp/>rosbridge.publisher(server_name+</highlight><highlight class="stringliteral">&apos;/cancel&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&apos;actionlib_msgs/GoalID&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="367"><highlight class="normal"></highlight></codeline>
<codeline lineno="368"><highlight class="normal"><sp/><sp/><sp/><sp/>@property</highlight></codeline>
<codeline lineno="369"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal">usage(self):</highlight></codeline>
<codeline lineno="370"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>self.<ref refid="classrosbridge__client_1_1__ActionClient_1a1030e35ca5042d1af61220da421fce9a" kindref="member">_usage</ref></highlight></codeline>
<codeline lineno="371"><highlight class="normal"></highlight></codeline>
<codeline lineno="372"><highlight class="normal"><sp/><sp/><sp/><sp/>@usage.setter</highlight></codeline>
<codeline lineno="373"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal">usage(self,<sp/>value):</highlight></codeline>
<codeline lineno="374"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classrosbridge__client_1_1__ActionClient_1a1030e35ca5042d1af61220da421fce9a" kindref="member">_usage</ref><sp/>=<sp/>value</highlight></codeline>
<codeline lineno="375"><highlight class="normal"></highlight></codeline>
<codeline lineno="376"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classrosbridge__client_1_1__ActionClient_1adbf822ca30fcae15faf0ad080f0c6be2" kindref="member">on_feedback</ref>(self,<sp/>message):</highlight></codeline>
<codeline lineno="377"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Callback<sp/>when<sp/>a<sp/>feedback<sp/>message<sp/>received.</highlight></codeline>
<codeline lineno="378"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="379"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Args:</highlight></codeline>
<codeline lineno="380"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>message<sp/>(dict):<sp/>A<sp/>feedback<sp/>message<sp/>received<sp/>from<sp/>ROS<sp/>action<sp/>server.</highlight></codeline>
<codeline lineno="381"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="382"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>goal<sp/>=<sp/>self._goals.get(message.get(</highlight><highlight class="stringliteral">&apos;status&apos;</highlight><highlight class="normal">).get(</highlight><highlight class="stringliteral">&apos;goal_id&apos;</highlight><highlight class="normal">).get(</highlight><highlight class="stringliteral">&apos;id&apos;</highlight><highlight class="normal">))</highlight></codeline>
<codeline lineno="383"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>goal:</highlight></codeline>
<codeline lineno="384"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>goal.feedback_received(message.get(</highlight><highlight class="stringliteral">&apos;feedback&apos;</highlight><highlight class="normal">),<sp/>message.get(</highlight><highlight class="stringliteral">&apos;status&apos;</highlight><highlight class="normal">))</highlight></codeline>
<codeline lineno="385"><highlight class="normal"></highlight></codeline>
<codeline lineno="386"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classrosbridge__client_1_1__ActionClient_1ada532b56ed3d4a383212b0e54670545f" kindref="member">on_result</ref>(self,<sp/>message):</highlight></codeline>
<codeline lineno="387"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Callback<sp/>when<sp/>a<sp/>result<sp/>message<sp/>received.</highlight></codeline>
<codeline lineno="388"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="389"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Args:</highlight></codeline>
<codeline lineno="390"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>message<sp/>(dict):<sp/>A<sp/>result<sp/>message<sp/>received<sp/>from<sp/>ROS<sp/>action<sp/>server.</highlight></codeline>
<codeline lineno="391"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="392"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>goal<sp/>=<sp/>self._goals.get(message.get(</highlight><highlight class="stringliteral">&apos;status&apos;</highlight><highlight class="normal">).get(</highlight><highlight class="stringliteral">&apos;goal_id&apos;</highlight><highlight class="normal">).get(</highlight><highlight class="stringliteral">&apos;id&apos;</highlight><highlight class="normal">))</highlight></codeline>
<codeline lineno="393"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>goal:</highlight></codeline>
<codeline lineno="394"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>goal.result_received(message.get(</highlight><highlight class="stringliteral">&apos;result&apos;</highlight><highlight class="normal">),<sp/>message.get(</highlight><highlight class="stringliteral">&apos;status&apos;</highlight><highlight class="normal">))</highlight></codeline>
<codeline lineno="395"><highlight class="normal"></highlight></codeline>
<codeline lineno="396"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classrosbridge__client_1_1__ActionClient_1a29788da4893bfbd67cba894116efbeae" kindref="member">send_goal</ref>(self,<sp/>goal_message,<sp/>on_result,<sp/>on_feedback):</highlight></codeline>
<codeline lineno="397"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Send<sp/>a<sp/>goal<sp/>to<sp/>the<sp/>ROS<sp/>action<sp/>server.</highlight></codeline>
<codeline lineno="398"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="399"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Args:</highlight></codeline>
<codeline lineno="400"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>goal_message<sp/>(dict):<sp/>A<sp/>message<sp/>to<sp/>send<sp/>to<sp/>ROS<sp/>action<sp/>server.</highlight></codeline>
<codeline lineno="401"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>on_result<sp/>(function):<sp/>A<sp/>callback<sp/>function<sp/>to<sp/>be<sp/>called<sp/>when<sp/>a<sp/>feedback<sp/>message<sp/>received.</highlight></codeline>
<codeline lineno="402"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>on_feedback<sp/>(function):<sp/>A<sp/>callback<sp/>function<sp/>to<sp/>be<sp/>called<sp/>when<sp/>a<sp/>result<sp/>message<sp/>received.</highlight></codeline>
<codeline lineno="403"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="404"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>goal<sp/>=<sp/><ref refid="classrosbridge__client_1_1__Goal" kindref="compound">_Goal</ref>(goal_message,<sp/>on_result,<sp/>on_feedback)</highlight></codeline>
<codeline lineno="405"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classrosbridge__client_1_1__ActionClient_1a6de7dd1134d12b6c0f3ba12a4503d152" kindref="member">_goals</ref>[goal.id]<sp/>=<sp/>goal</highlight></codeline>
<codeline lineno="406"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self._goal_pub.publish(goal.message)</highlight></codeline>
<codeline lineno="407"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>goal.id</highlight></codeline>
<codeline lineno="408"><highlight class="normal"></highlight></codeline>
<codeline lineno="409"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classrosbridge__client_1_1__ActionClient_1a55f112c7417133d35b6078d3bb6710fe" kindref="member">cancel_goal</ref>(self,<sp/>goal_id):</highlight></codeline>
<codeline lineno="410"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Cancel<sp/>a<sp/>goal<sp/>with<sp/>a<sp/>given<sp/>goal<sp/>ID</highlight></codeline>
<codeline lineno="411"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="412"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Args:</highlight></codeline>
<codeline lineno="413"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>goal_id<sp/>(str):<sp/>The<sp/>ID<sp/>of<sp/>the<sp/>goal<sp/>to<sp/>be<sp/>cancelled.</highlight></codeline>
<codeline lineno="414"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="415"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self._cancel_pub.publish({</highlight><highlight class="stringliteral">&apos;id&apos;</highlight><highlight class="normal">:<sp/>goal_id})</highlight></codeline>
<codeline lineno="416"><highlight class="normal"></highlight></codeline>
<codeline lineno="417"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classrosbridge__client_1_1__ActionClient_1a8b94079cddbb7573800f05adf14de56f" kindref="member">unregister</ref>(self):</highlight></codeline>
<codeline lineno="418"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Reduce<sp/>the<sp/>usage<sp/>of<sp/>the<sp/>action<sp/>client.<sp/>If<sp/>the<sp/>usage<sp/>is<sp/>0,<sp/>unregister<sp/>its<sp/>publishers<sp/>and<sp/>subscribers.&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="419"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classrosbridge__client_1_1__ActionClient_1a1030e35ca5042d1af61220da421fce9a" kindref="member">_usage</ref><sp/>-=<sp/>1</highlight></codeline>
<codeline lineno="420"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>self.<ref refid="classrosbridge__client_1_1__ActionClient_1a1030e35ca5042d1af61220da421fce9a" kindref="member">_usage</ref><sp/>==<sp/>0:</highlight></codeline>
<codeline lineno="421"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self._feedback_sub.unregister()</highlight></codeline>
<codeline lineno="422"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self._result_sub.unregister()</highlight></codeline>
<codeline lineno="423"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self._goal_pub.unregister()</highlight></codeline>
<codeline lineno="424"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self._cancel_pub.unregister()</highlight></codeline>
<codeline lineno="425"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self._rosbridge.unregister_action_client(self.<ref refid="classrosbridge__client_1_1__ActionClient_1afdba23026c3ac9004782756aad75ccb5" kindref="member">_server_name</ref>,<sp/>self.<ref refid="classrosbridge__client_1_1__ActionClient_1ab673b59785c8be6009433598129cf8e0" kindref="member">_action_name</ref>)</highlight></codeline>
<codeline lineno="426"><highlight class="normal"></highlight></codeline>
<codeline lineno="427"><highlight class="normal"></highlight></codeline>
<codeline lineno="428" refid="classrosbridge__client_1_1__Goal" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">class<sp/></highlight><highlight class="normal"><ref refid="classrosbridge__client_1_1__Goal" kindref="compound">_Goal</ref>(object):</highlight></codeline>
<codeline lineno="429"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classrosbridge__client_1_1__Goal_1ac92f5e42a4cd74bcede2ec41844e19ee" kindref="member">__init__</ref>(self,<sp/>message,<sp/>on_result=None,<sp/>on_feedback=None):</highlight></codeline>
<codeline lineno="430"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Constructor<sp/>for<sp/>_Goal</highlight></codeline>
<codeline lineno="431"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="432"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Args:</highlight></codeline>
<codeline lineno="433"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>message<sp/>(dict):<sp/>The<sp/>goal<sp/>message<sp/>to<sp/>send<sp/>to<sp/>ROS<sp/>action<sp/>server.</highlight></codeline>
<codeline lineno="434"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>on_result<sp/>(function):<sp/>A<sp/>callback<sp/>function<sp/>to<sp/>be<sp/>called<sp/>when<sp/>a<sp/>feedback<sp/>message<sp/>received.</highlight></codeline>
<codeline lineno="435"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>on_feedback<sp/>(function):<sp/>A<sp/>callback<sp/>function<sp/>to<sp/>be<sp/>called<sp/>when<sp/>a<sp/>result<sp/>message<sp/>received.</highlight></codeline>
<codeline lineno="436"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="437"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classrosbridge__client_1_1__Goal_1a37dfcf3fc912c7bd62946048d509b2aa" kindref="member">_id</ref><sp/>=<sp/></highlight><highlight class="stringliteral">&apos;goal_&apos;</highlight><highlight class="normal"><sp/>+<sp/>str(uuid.uuid4())</highlight></codeline>
<codeline lineno="438"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classrosbridge__client_1_1__Goal_1ad7f1117a7f266ffa9e249ea6b038c746" kindref="member">_message</ref><sp/>=<sp/>message</highlight></codeline>
<codeline lineno="439"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classrosbridge__client_1_1__Goal_1abce87f62de3a6d37b7bce99fe4b71c04" kindref="member">_is_finished</ref><sp/>=<sp/></highlight><highlight class="keyword">False</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="440"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classrosbridge__client_1_1__Goal_1af540ed73843917341fb99c94e534a4b9" kindref="member">_on_result</ref><sp/>=<sp/>on_result</highlight></codeline>
<codeline lineno="441"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classrosbridge__client_1_1__Goal_1a152151e25085cdabddad9e8fec122d44" kindref="member">_on_feedback</ref><sp/>=<sp/>on_feedback</highlight></codeline>
<codeline lineno="442"><highlight class="normal"></highlight></codeline>
<codeline lineno="443"><highlight class="normal"><sp/><sp/><sp/><sp/>@property</highlight></codeline>
<codeline lineno="444"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal">id(self):</highlight></codeline>
<codeline lineno="445"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>self.<ref refid="classrosbridge__client_1_1__Goal_1a37dfcf3fc912c7bd62946048d509b2aa" kindref="member">_id</ref></highlight></codeline>
<codeline lineno="446"><highlight class="normal"></highlight></codeline>
<codeline lineno="447"><highlight class="normal"><sp/><sp/><sp/><sp/>@property</highlight></codeline>
<codeline lineno="448"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classrosbridge__client_1_1__Goal_1a70ba894b0982d8bf9c67710d9da70d58" kindref="member">message</ref>(self):</highlight></codeline>
<codeline lineno="449"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Wrap<sp/>message<sp/>in<sp/>JSON<sp/>format<sp/>that<sp/>complies<sp/>ROSBridge<sp/>protocol.</highlight></codeline>
<codeline lineno="450"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="451"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Returns:</highlight></codeline>
<codeline lineno="452"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>A<sp/>Json<sp/>that<sp/>contains<sp/>the<sp/>goal<sp/>ID<sp/>and<sp/>message.</highlight></codeline>
<codeline lineno="453"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="454"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="455"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;goal_id&apos;</highlight><highlight class="normal">:<sp/>{</highlight></codeline>
<codeline lineno="456"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;stamp&apos;</highlight><highlight class="normal">:<sp/>{</highlight></codeline>
<codeline lineno="457"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;secs&apos;</highlight><highlight class="normal">:<sp/>0,</highlight></codeline>
<codeline lineno="458"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;nsecs&apos;</highlight><highlight class="normal">:<sp/>0</highlight></codeline>
<codeline lineno="459"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>},</highlight></codeline>
<codeline lineno="460"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;id&apos;</highlight><highlight class="normal">:<sp/>self.<ref refid="classrosbridge__client_1_1__Goal_1a37dfcf3fc912c7bd62946048d509b2aa" kindref="member">_id</ref></highlight></codeline>
<codeline lineno="461"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>},</highlight></codeline>
<codeline lineno="462"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;goal&apos;</highlight><highlight class="normal">:<sp/>self.<ref refid="classrosbridge__client_1_1__Goal_1ad7f1117a7f266ffa9e249ea6b038c746" kindref="member">_message</ref></highlight></codeline>
<codeline lineno="463"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="464"><highlight class="normal"></highlight></codeline>
<codeline lineno="465"><highlight class="normal"><sp/><sp/><sp/><sp/>@property</highlight></codeline>
<codeline lineno="466"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal">is_finished(self):</highlight></codeline>
<codeline lineno="467"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>self.<ref refid="classrosbridge__client_1_1__Goal_1abce87f62de3a6d37b7bce99fe4b71c04" kindref="member">_is_finished</ref></highlight></codeline>
<codeline lineno="468"><highlight class="normal"></highlight></codeline>
<codeline lineno="469"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classrosbridge__client_1_1__Goal_1ac7ca4094b89938c25be35811082b7475" kindref="member">result_received</ref>(self,<sp/>result,<sp/>status):</highlight></codeline>
<codeline lineno="470"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Called<sp/>when<sp/>a<sp/>result<sp/>message<sp/>is<sp/>received.</highlight></codeline>
<codeline lineno="471"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="472"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Args:</highlight></codeline>
<codeline lineno="473"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>result<sp/>(dict):<sp/>The<sp/>result<sp/>message.</highlight></codeline>
<codeline lineno="474"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>status<sp/>(int):<sp/>The<sp/>status<sp/>code.<sp/>Such<sp/>as:</highlight></codeline>
<codeline lineno="475"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ACTIVE<sp/>=<sp/>1:<sp/>The<sp/>goal<sp/>is<sp/>currently<sp/>being<sp/>processed<sp/>by<sp/>the<sp/>action<sp/>server;</highlight></codeline>
<codeline lineno="476"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>PREEMPTED<sp/>=<sp/>2:<sp/>The<sp/>goal<sp/>received<sp/>a<sp/>cancel<sp/>request<sp/>after<sp/>it<sp/>started<sp/>executing;</highlight></codeline>
<codeline lineno="477"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>SUCCEEDED<sp/>=<sp/>3:<sp/>The<sp/>goal<sp/>was<sp/>achieved<sp/>successfully<sp/>by<sp/>the<sp/>action<sp/>server;</highlight></codeline>
<codeline lineno="478"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ABORTED<sp/>=<sp/>4:<sp/>The<sp/>goal<sp/>was<sp/>aborted<sp/>during<sp/>execution<sp/>by<sp/>the<sp/>action<sp/>server<sp/>due<sp/>to<sp/>some<sp/>failure.</highlight></codeline>
<codeline lineno="479"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>For<sp/>more<sp/>details,<sp/>refer<sp/>to<sp/>http://docs.ros.org/indigo/api/actionlib_msgs/html/msg/GoalStatus.html.</highlight></codeline>
<codeline lineno="480"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="481"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classrosbridge__client_1_1__Goal_1abce87f62de3a6d37b7bce99fe4b71c04" kindref="member">_is_finished</ref><sp/>=<sp/></highlight><highlight class="keyword">True</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="482"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>callable(self.<ref refid="classrosbridge__client_1_1__Goal_1af540ed73843917341fb99c94e534a4b9" kindref="member">_on_result</ref>):</highlight></codeline>
<codeline lineno="483"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classrosbridge__client_1_1__Goal_1af540ed73843917341fb99c94e534a4b9" kindref="member">_on_result</ref>(result,<sp/>status)</highlight></codeline>
<codeline lineno="484"><highlight class="normal"></highlight></codeline>
<codeline lineno="485"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classrosbridge__client_1_1__Goal_1ae3d71a24dee5fb59d52afa53e6fc31d5" kindref="member">feedback_received</ref>(self,<sp/>feedback,<sp/>status):</highlight></codeline>
<codeline lineno="486"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Called<sp/>when<sp/>a<sp/>result<sp/>message<sp/>is<sp/>received.</highlight></codeline>
<codeline lineno="487"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="488"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Args:</highlight></codeline>
<codeline lineno="489"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>feedback<sp/>(dict):<sp/>The<sp/>feedback<sp/>message.</highlight></codeline>
<codeline lineno="490"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>status<sp/>(int):<sp/>The<sp/>status<sp/>code.<sp/>Such<sp/>as:</highlight></codeline>
<codeline lineno="491"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ACTIVE<sp/>=<sp/>1:<sp/>The<sp/>goal<sp/>is<sp/>currently<sp/>being<sp/>processed<sp/>by<sp/>the<sp/>action<sp/>server;</highlight></codeline>
<codeline lineno="492"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>PREEMPTED<sp/>=<sp/>2:<sp/>The<sp/>goal<sp/>received<sp/>a<sp/>cancel<sp/>request<sp/>after<sp/>it<sp/>started<sp/>executing;</highlight></codeline>
<codeline lineno="493"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>SUCCEEDED<sp/>=<sp/>3:<sp/>The<sp/>goal<sp/>was<sp/>achieved<sp/>successfully<sp/>by<sp/>the<sp/>action<sp/>server;</highlight></codeline>
<codeline lineno="494"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ABORTED<sp/>=<sp/>4:<sp/>The<sp/>goal<sp/>was<sp/>aborted<sp/>during<sp/>execution<sp/>by<sp/>the<sp/>action<sp/>server<sp/>due<sp/>to<sp/>some<sp/>failure.</highlight></codeline>
<codeline lineno="495"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>For<sp/>more<sp/>details,<sp/>refer<sp/>to<sp/>http://docs.ros.org/indigo/api/actionlib_msgs/html/msg/GoalStatus.html.</highlight></codeline>
<codeline lineno="496"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="497"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>callable(self.<ref refid="classrosbridge__client_1_1__Goal_1a152151e25085cdabddad9e8fec122d44" kindref="member">_on_feedback</ref>):</highlight></codeline>
<codeline lineno="498"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classrosbridge__client_1_1__Goal_1a152151e25085cdabddad9e8fec122d44" kindref="member">_on_feedback</ref>(feedback,<sp/>status)</highlight></codeline>
<codeline lineno="499"><highlight class="normal"></highlight></codeline>
    </programlisting>
    <location file="/home/brent/koko_interface/rosbridge_client.py"/>
  </compounddef>
</doxygen>
